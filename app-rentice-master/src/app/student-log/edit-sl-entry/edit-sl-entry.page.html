<ion-header>
  <ion-toolbar>
  	   <ion-buttons slot="start">
    <ion-button routerLink="/view-sl-entry">
      <ion-icon slot="icon-only" name="arrow-round-back"></ion-icon>
    </ion-button>
  </ion-buttons>
    <ion-title>{{'Edit Entry' | translate}}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content padding color="light">
	<div class="main-list">
		<ion-item>
		  <ion-label>{{'Main Category' | translate}}</ion-label>
		  <ion-select placeholder="Select One" [value]="data.main_category" [(ngModel)]="data.main_category" (ionChange)="changeMainCategory()">
	      <ion-select-option *ngFor="let item of mainCategoryList;let i = index" [value]="item.cat">
	      	{{item.name}}
	      </ion-select-option>
	    </ion-select>
		</ion-item>
		<ion-item>
		  <ion-label>{{'Sub Category' | translate}}</ion-label>
		  <ion-select placeholder="Select One" [value]="data.sub_category" [(ngModel)]="data.sub_category" (ionChange)="changeSubCategory()">
	      <ion-select-option *ngFor="let item of subCategoryList" [value]="item.list_id">{{item.name}}</ion-select-option>
	    </ion-select>
		</ion-item>
		<ion-item>
	    <ion-label>{{'Activity' | translate}}</ion-label>
      <ion-select multiple="true" placeholder="Select One" [value]="data.inventory_itemList" [(ngModel)]="data.inventory_itemList">
	      <ion-select-option *ngFor="let item of activities;let i = index" [value]="item.name">{{item.name}}</ion-select-option>
	    </ion-select>
	  </ion-item>
	  <ion-item>
	    <ion-label>{{'Project' | translate}}</ion-label>
      <ion-select placeholder="Select One" [value]="data.address" [(ngModel)]="data.address">
	      <ion-select-option *ngFor="let item of addressList" [value]="item.list_id">{{item.address}}</ion-select-option>
	    </ion-select>
	  </ion-item>
		<ion-item>
		  <ion-label position="fixed">{{'Hours' | translate}}</ion-label>
		  <ion-input type="text" [(ngModel)]="data.inventory_value"></ion-input>
		</ion-item>
		<ion-item>
		  <ion-label position="fixed">{{'Notes' | translate}}</ion-label>
		  <ion-textarea rows="4" cols="20" placeholder="Enter notes..." [(ngModel)]="data.notes"></ion-textarea>
		</ion-item>
		<ion-item>
		  <ion-label>{{'Date' | translate}}</ion-label>
		  <ion-datetime [(ngModel)]="data.date" display-format="MM/DD/YYYY" picker-format="MMMM DD YYYY"></ion-datetime>
		</ion-item>
		<div>
      <div *ngIf="!studentImg && data.image" (click)="openCamera()">
        <img src="https://www.artisanideas.co.nz/itab/database/styled/{{data.inventory_image | reverseStr}}">
      </div>
      <div *ngIf="studentImg" (click)="openCamera()">
        <img src="{{studentImg}}">
      </div>
    </div>
    <div *ngIf="!showButton">
    	<img *ngFor="let item of imageList;let i=index" id="img{{i}}" src="https://www.artisanideas.co.nz/itab/database/styled/{{item.data | reverseStr}}">
    </div>
    <!--<ion-item>
	    <ion-label>Add to Time Sheet</ion-label>
	    <ion-checkbox slot="start" [(ngModel)]="data.savetimesheet"></ion-checkbox>
	  </ion-item>-->
    <div class="width-100" *ngIf="isCordova">
			<ion-button (click)="openCamera()" *ngIf="showButton">
        <ion-icon slot="start" name="camera"></ion-icon>
        {{'Add Photo' | translate}}
      </ion-button>
		</div>
		<div *ngIf="!isCordova && showButton" class="width-100">
			<div>	
				<input type="file" name="file" id="file3" class="inputfile" (change)="selectFileToUpload($event)" />
				<label for="file3">{{'Add Photo' | translate}}</label>
			</div>
			<div>
				<img *ngFor="let item of imageNewList" [src]="item.data">
			</div>
		</div>
		<div class="width-100">
    	<ion-button (click)="doUpdate()" class="ion-button-block">{{'Save Update' | translate}}</ion-button>
    </div>
  </div>
</ion-content>
